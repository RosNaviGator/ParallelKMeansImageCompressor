<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ParallelKmeansImageCompressor: Parallel Kmeans-based Images Compressor</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ParallelKmeansImageCompressor
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Parallel Kmeans-based Images Compressor </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_README"></a> </p><div class="image">
<img src="milanoCompressed.png" alt=""/>
<div class="caption">
milano</div></div>
    <p>This project implements a <b>parallel KMeans-based image colors compressor</b>, aimed at reducing the number of colors in a natural image while preserving its overall visual appearance. The program clusters similar colors using the <b>KMeans algorithm</b> and applies <b>parallel computing techniques</b> to compress the image through the <b>color quantization</b> technique. It supports <b>sequential</b>, <b>OpenMP</b>, <b>MPI</b>, and <b>CUDA</b> implementations to explore different levels of performance and scalability.</p>
<h1><a class="anchor" id="autotoc_md1"></a>
Authors</h1>
<ul>
<li><p class="startli"><b>Leonardo Ignazio Pagliochini</b> Master's Degree student in High-Performance Computing Engineering at <b>Politecnico di Milano</b></p>
<p class="startli">GitHub: <a href="https://github.com/leonardopagliochini">leonardopagliochini</a> <br  />
 Email: <a href="#" onclick="location.href='mai'+'lto:'+'leo'+'na'+'rdo'+'ig'+'naz'+'io'+'.pa'+'gl'+'ioc'+'hi'+'ni@'+'ma'+'il.'+'po'+'lim'+'i.'+'it'; return false;">leona<span class="obfuscator">.nosp@m.</span>rdoi<span class="obfuscator">.nosp@m.</span>gnazi<span class="obfuscator">.nosp@m.</span>o.pa<span class="obfuscator">.nosp@m.</span>glioc<span class="obfuscator">.nosp@m.</span>hini<span class="obfuscator">.nosp@m.</span>@mail<span class="obfuscator">.nosp@m.</span>.pol<span class="obfuscator">.nosp@m.</span>imi.i<span class="obfuscator">.nosp@m.</span>t</a></p>
</li>
<li><p class="startli"><b>Francesco Rosnati</b> Master's Degree student in High-Performance Computing Engineering at <b>Politecnico di Milano</b></p>
<p class="startli">GitHub: <a href="https://github.com/RosNaviGator">RosNaviGator</a> <br  />
 Email: <a href="#" onclick="location.href='mai'+'lto:'+'fra'+'nc'+'esc'+'o.'+'ros'+'na'+'ti@'+'ma'+'il.'+'po'+'lim'+'i.'+'it'; return false;">franc<span class="obfuscator">.nosp@m.</span>esco<span class="obfuscator">.nosp@m.</span>.rosn<span class="obfuscator">.nosp@m.</span>ati@<span class="obfuscator">.nosp@m.</span>mail.<span class="obfuscator">.nosp@m.</span>poli<span class="obfuscator">.nosp@m.</span>mi.it</a></p>
</li>
</ul>
<p>This project was developed for the course <b>Advanced Methods for Scientific Computing</b>, <br  />
 Professor: <b>Luca Formaggia</b> <br  />
 Assistant Professor: <b>Matteo Caldana</b> <br  />
 <b>Politecnico di Milano</b></p>
<h1><a class="anchor" id="autotoc_md2"></a>
Doxygen Documentation</h1>
<p>The documentation of the project can be found <a href="docs/html/index.html">here</a>.</p>
<h1><a class="anchor" id="autotoc_md3"></a>
Prerequisites</h1>
<h2><a class="anchor" id="autotoc_md4"></a>
TO DO</h2>
<ul>
<li>testare con VM, alla fine!</li>
<li>scrivere effettivamente bash commands per installare quant orichiesto (boost/process, opencv, etc ...)</li>
<li>DISATTIVARE mk modules, va detto</li>
<li>versione di g++ giusta per nostro MPIC++, quella che vada con <code>span</code> e altre cose nuove dello standard 20 o maggiore (mi pare)</li>
<li>verrsione giusta di g++ per la versione di cuda nostra (ste robe le vedi anche dalle flag del compilatore nel Makefile)</li>
<li>c++ 20? 23? Checckare non ricordo</li>
<li>meglio usare <code>openMPI</code> rispetto a <code>mpich</code>, ha sempre funzionato il primo, il secondo ha dato problemi talvolta</li>
<li>le librerie che mi vengono in mente sono <code>boost/process</code>, <code>opencv2</code>, se ce ne sono altre saranno negli <code>#include</code></li>
<li>puiler dalla mierda lo repo!</li>
</ul>
<h1><a class="anchor" id="autotoc_md8"></a>
Getting Started</h1>
<h2><a class="anchor" id="autotoc_md9"></a>
Cloning repo</h2>
<p>Standard coloning with <code>git clone</code>, no <em>submodules</em> are implemented in this repo. </p>
<h2><a class="anchor" id="autotoc_md10"></a>
Install dependencies</h2>
<h3><a class="anchor" id="autotoc_md11"></a>
Debian based</h3>
<div class="fragment"><div class="line"># Run commands from PROJECT ROOT DIRECTORY</div>
<div class="line">sudo chmod +x ./dependencyInstaller/dependencyInstallerDebianBased.sh</div>
<div class="line">source ./dependencyInstaller/dependencyInstallerDebianBased.sh</div>
</div><!-- fragment --> <h3><a class="anchor" id="autotoc_md12"></a>
Arch based</h3>
<div class="fragment"><div class="line"># Run commands from PROJECT ROOT DIRECTORY</div>
<div class="line">sudo chmod +x ./dependencyInstaller/dependencyInstallerArchBased.sh</div>
<div class="line">source ./dependencyInstaller/dependencyInstallerArchBased.sh</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md13"></a>
Compile&amp;Run</h2>
<p>Program can be built with or without <b>CUDA</b>, you obviously <em>need</em> <code>nvcc</code> to be able to compile with <b>CUDA</b>. To compile the project, navigate to the <b>project root directory</b> in your terminal and run the following commands. </p>
<h3><a class="anchor" id="autotoc_md14"></a>
Without CUDA</h3>
<div class="fragment"><div class="line"># make without running</div>
<div class="line">make</div>
<div class="line"># make and run the menu (or simply run if already built)</div>
<div class="line">make run</div>
</div><!-- fragment --> <h3><a class="anchor" id="autotoc_md15"></a>
With cuda</h3>
<div class="fragment"><div class="line"># make without running (bulding also CUDA)</div>
<div class="line">make cuda</div>
<div class="line"># make and run the menu (building also CUDA)</div>
<div class="line">make cudarun</div>
</div><!-- fragment --> <h3><a class="anchor" id="autotoc_md16"></a>
Geek stuff</h3>
<p>For a standard run program will guide you to choose an <em>image path</em>, <em>parallel method</em>, <em>configuration settings</em>. See section "What to expect" for more infromation.</p>
<h1><a class="anchor" id="autotoc_md17"></a>
What to expect</h1>
<p>Once the program is started, the following screen appears, through which it is possible to compress a new image or decompress an already compressed image.</p>
<div class="image">
<img src="mainMenuScreenshot.png" alt=""/>
<div class="caption">
alt text</div></div>
    <p>If you choose the "Compress an image" option you can select one type of compressor (sequential, MPI or OpenMP), the type of compression and the path of the original image.</p>
<p>The result image will be created in the output folder and you can rerun <code>./exe</code> selecting the decoding function to decode it.</p>
<h1><a class="anchor" id="autotoc_md18"></a>
Project Structure</h1>
<p>The project is organized as follows: </p>
<h3><a class="anchor" id="autotoc_md19"></a>
Folders</h3>
<ul>
<li><code>benchmarkImages</code>: This folder contains the images used for benchmarking the program. It can be used to test the program's performance.</li>
<li><code>outputs</code>: This folder contains the compressed images. After installing the program, you may notice that the outputs folder is not present. However, don't worry! It will be automatically created during the first execution of the program.</li>
<li><code>include</code>: This folder contains the header files of the project. These define the classes and functions that are used in the program.</li>
<li><code>src</code>: This folder contains the source files of the project. These files contain the implementation of the classes and functions defined in the header files.</li>
<li><code>build</code>: This folder contains the object files generated during the compilation process.</li>
</ul>
<h3><a class="anchor" id="autotoc_md20"></a>
Files and Executables</h3>
<ul>
<li><code>exe</code>: This is the executable file generated after compiling the project. It is the main program that can be executed to compress or decompress images.</li>
<li><code>Makefile</code>: This file contains the instructions for compiling the project. It specifies the dependencies and the commands to compile the project.</li>
<li><code>.config</code>: This file contains the configuration of the program. It is used to store some hyperparameters that can be modified to change the behavior of the program.</li>
</ul>
<h1><a class="anchor" id="autotoc_md21"></a>
How does it work?</h1>
<p>The program compresses images by reducing the number of colors in the image. It does this by clustering the pixels into k color groups using the k-means clustering algorithm. The k-means algorithm is an unsupervised learning algorithm that partitions the data into k clusters based on the similarity of the data points. In the context of image compression, the data points are the pixels of the image, and the clusters are the colors that represent the image.</p>
<div class="image">
<img src="Albero-removebg-preview.png" alt=""/>
<div class="caption">
tree</div></div>
    <p>The k-means algorithm works as follows:</p><ol type="1">
<li>Initialize k centroids randomly.</li>
<li>Assign each data point to the nearest centroid.</li>
<li>Recompute the centroids based on the data points assigned to them.</li>
<li>Repeat steps 2 and 3 until convergence.</li>
</ol>
<p>The k-means algorithm is an iterative algorithm that converges to a local minimum. The quality of the compression depends on the value of k, the number of clusters. A higher value of k will result in a better representation of the image but will require more memory to store the centroids.</p>
<h1><a class="anchor" id="autotoc_md22"></a>
Parallelization Techniques</h1>
<p>The program uses several parallelization techniques to enhance performance. These techniques include:</p><ul>
<li><b>OpenMP</b>: OpenMP is an API for parallel programming on shared-memory systems. It allows the program to parallelize the computation of the k-means algorithm by distributing the work among multiple threads.</li>
<li><b>MPI</b>: MPI is a message-passing library for parallel programming on distributed-memory systems. It allows the program to parallelize the computation of the k-means algorithm by distributing the work among multiple processes running on different nodes.</li>
</ul>
<h1><a class="anchor" id="autotoc_md23"></a>
Benchmarking</h1>
<p>The program includes a benchmarking feature that allows you to test the performance of the program on different images. The benchmarking feature measures the time taken to compress an image using different compression techniques and different values of k. The benchmarking results are displayed in a table that shows the time taken to compress the image for each value of k and each compression technique. </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6
</small></address>
</body>
</html>
